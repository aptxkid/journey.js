<!doctype html>

<html>
<head>
  <meta charset="utf-8"/>
  <link href="http://fonts.googleapis.com/css?family=Open+Sans:regular,semibold,italic,italicsemibold|PT+Sans:400,700,400italic,700italic|PT+Serif:400,700,400italic,700italic" rel="stylesheet" />
  <link href="css/journey-demo.css" rel="stylesheet" />
</head>
<body>
<div id="loading">
  <p>Please wait while the page is loading... <small>(if it takes a long time, try again in Chrome)</small></p>
</div>
<div id="hint">
  <p>Please use the headphone, since there will be music. Use spacebar to start or pause/resume</p>
</div>
<div id="journey">

  <audio id="journey-audio" src="resources/101.mp3" data-length="3:36"></audio>

  <div class="journey-slide text-slide" data-duration="4">
    <p class="journey-p">
      一转眼，我们已经一起在美国生活了三年
    </p>
  </div>

  <div class="journey-slide text-slide" data-duration="3">
    <p class="journey-p">从最初到Austin...</p>
  </div>

  <div class="journey-slide">
    <img class="journey-img" src="resources/austin/austin01.jpg"/>
    <p class="annotation">第一次搬家，坐在trunk里</p>
  </div>

  <div class="journey-slide">
    <img class="journey-img" src="resources/austin/austin02.jpg"/>
    <p class="annotation">拼凑自己的大床</p>
  </div>

  <div class="journey-slide">
    <img class="journey-img" src="resources/austin/shuttle02.jpg"/>
    <p class="annotation">下课了，一起等校车回家</p>
  </div>

  <div class="journey-slide">
    <img class="journey-img" src="resources/austin/home01.jpg"/>
    <p class="annotation">家虽然很小</p>
  </div>

  <div class="journey-slide">
    <img class="journey-img" src="resources/austin/home02.jpg"/>
    <p class="annotation">但是可以挤在厨房吃火锅</p>
  </div>

  <div class="journey-slide">
    <img class="journey-img" src="resources/austin/home03.jpg"/>
    <p class="annotation">窗外可以看到小松鼠</p>
  </div>

  <div class="journey-slide">
    <img class="journey-img" src="resources/austin/home04.jpg"/>
    <p class="annotation">最重要的是，家里有你</p>
  </div>

  <div class="journey-slide">
    <img class="journey-img" src="resources/austin/dinner01.jpg"/>
    <p class="annotation">第一次去Madam Mam's庆祝找到第一份兼职</p>
  </div>

  <div class="journey-slide">
    <img class="journey-img" src="resources/austin/downtown02.jpg"/>
    <p class="annotation">第一次去downtown Austin</p>
  </div>

  <div class="journey-slide">
    <img class="journey-img" src="resources/austin/downtown01.jpg"/>
    <p class="annotation">（我的这个头应该是你剪的...）</p>
  </div>

  <div class="journey-slide">
    <img class="journey-img" src="resources/austin/river01.jpg"/>
    <p class="annotation">第一次在Austin 划船</p>
  </div>

  <div class="journey-slide text-slide" data-duration="3">
    <p class="journey-p">然后...我们订婚了~\(≧▽≦)/</p>
  </div>

  <div class="journey-slide">
    <img class="journey-img" src="resources/austin/ring01.jpg"/>
  </div>

  <div class="journey-slide">
    <img class="journey-img" src="resources/austin/ring02.jpg"/>
  </div>

  <div class="journey-slide">
    <img class="journey-img" src="resources/austin/wedding.jpg"/>
    <p class="annotation">接着，我们结婚了</p>
  </div>

  <div class="journey-slide">
    <img class="journey-img" src="resources/austin/wedding02.jpg"/>
  </div>

  <div class="journey-slide text-slide" data-duration="4">
    <p class="journey-p">我们去Seattle过了暑假...</p>
  </div>

  <div class="journey-slide">
    <img class="journey-img" src="resources/seattle/biking01.jpg"/>
    <p class="annotation">我们一起骑车</p>
  </div>

  <div class="journey-slide">
    <img class="journey-img" src="resources/seattle/hiking01.jpg"/>
    <p class="annotation">一起爬 Mt. Rainier</p>
  </div>

  <div class="journey-slide">
    <img class="journey-img" src="resources/seattle/sushi.jpg"/>
    <p class="annotation">你做sushi给我吃 :D</p>
  </div>

  <div class="journey-slide">
    <img class="journey-img" src="resources/austin/tv01.jpg"/>
    <p class="annotation">从Seattle回去以后，我们买了电视</p>
  </div>

  <div class="journey-slide">
    <img class="journey-img" src="resources/austin/car01.jpg"/>
    <p class="annotation">买了第一辆车</p>
  </div>

  <div class="journey-slide">
    <img class="journey-img" src="resources/houston/houston.jpg"/>
    <p class="annotation">去了Houston</p>
  </div>

  <div class="journey-slide">
    <img class="journey-img" src="resources/austin/baby.jpg"/>
    <p class="annotation">你怀孕了 第一次看到我们的宝宝</p>
  </div>

  <div class="journey-slide">
    <img class="journey-img" src="resources/austin/graduation.jpg"/>
    <p class="annotation">第二次一起毕业</p>
  </div>

  <div class="journey-slide text-slide" data-duration="3">
    <p class="journey-p">毕业后，我们来到湾区</p>
  </div>

  <div class="journey-slide">
    <img class="journey-img" src="resources/bayarea/livermore.jpg"/>
    <p class="annotation">刚到湾区，用酒店的刀刮胡子</p>
  </div>

  <div class="journey-slide">
    <img class="journey-img" src="resources/bayarea/meadows02.jpg"/>
    <p class="annotation">搬到Meadows，拼家具</p>
  </div>

  <div class="journey-slide">
    <img class="journey-img" src="resources/bayarea/meadows05.jpg"/>
    <p class="annotation">然后终于，我们在湾区的家，也成型了</p>
  </div>

  <div class="journey-slide">
    <img class="journey-img" src="resources/baby/pregnancy02.jpg"/>
    <p class="annotation">我们一起去了医院，准备迎接我们的第一个宝宝</p>
  </div>

  <div class="journey-slide">
    <img class="journey-img" src="resources/baby/cool.jpg"/>
    <p class="annotation">And... here's Jeremy!</p>
  </div>

  <div class="journey-slide text-slide" data-duration="10">
    <p class="journey-p">
      感谢主让我每天的生活都有你的存在。虽然生活有时候很困难，但是你的笑容总是给我力量。
    </p>
  </div>

  <div class="journey-slide">
    <img class="journey-img" src="resources/funny/smile.jpg"/>
    <p class="annotation">Your smile thaws my heart</p>
  </div>

  <div class="journey-slide text-slide" data-duration="1">
    <p class="journey-p" id="happy-birthday">
      老婆生日快乐, I love you &lt;3
    </p>
  </div>


</div>

<script src="js/journey.js"></script>
<script src="js/jquery-1.11.1.min.js"></script>
<script>
  var not_supported = false;
  var init = function() {
    if (not_supported) {
      return;
    }
    try {
      journey.init();
    } catch (e) {
      console.log('Failed init due to exception: ' + e);
      console.log('Message: ' + e.message);
      if (e.name == "InvalidStateError") {
        console.log("Audio metadata is not loaded. Will retry init later");
        return;
      } else {
        $('#loading')[0].innerHTML = "You browser is not supported. Please try again with Chrome 35+, Firefox 29+, Safari 6+ or IE 11.";
        not_supported = true;
        return;
      }
    }
    var is_playing = false;
    var is_paused = false;
    var key_down = function(e) {
      if (e.keyCode === 32) {
        $('#hint')[0].style['display'] = 'none';
        if (!is_playing && !is_paused) {
          is_playing = true;
          journey.play();
        } else if (is_playing && !is_paused) {
          is_paused = true;
          journey.pause();
        } else if (is_playing && is_paused) {
          is_paused = false;
          journey.resume();
        }
      }
    };
    window.onkeydown = key_down;
    //initialization finished
    $('#loading')[0].style['display'] = 'none';
    $('#hint')[0].style['display'] = 'block';
  }

  //call init twice to make sure that when it's called the second time, it will be in good state
  $(document).ready(init);
  $('#journey-audio')[0].addEventListener('loadedmetadata', init);
</script>

</body>
</html>
